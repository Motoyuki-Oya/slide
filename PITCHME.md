マッチング基盤検討
===
- 株式会社SYNC

---

非機能要件
===

- UIとServer処理は疎結合（API）
  - [フロントエンド] -API-> [バックエンド]
- シンプルな作り（データパッチ当てなどであちらこちら気にしないでよいつくり）
-  基盤なので性能要求の変化に応じてエラスティックなシステムであること
- 可用性99.9%以上を要求された場合の構成にも対応できること
- カスタマイズ・習熟が容易であること
  - JavaDoc、コメントが十分入っていること
  - シンプルな作り
- 高速でストレスのないUI
- アクセシビリティ対応
  - タブ順がおかしくない。等は当然にできている事

---

- ナウい

---

機能要件
===

##ログイン

- OAUTH対応
 - Twitterアカウントでのログイン
 - Facebookアカウントでのログイン
 - Googleアカウントでのログイン
- 通常ログイン
 - ※ 通常のログイン用のテーブルが必要になるので初期はスコープ外とする
- 管理者ログイン
 - ログイン

## 会員情報登録
- OAuth連携で連携サービスから取得し登録する
  - 会員登録でのストレスを軽減する
- 会員登録はしなくても、マッチング情報の一覧と一部は参照できるようにする
  - 会員登録が必須のサービスはナウくない
  - 連絡先などの重要な機能はログイン（会員登録）を必須にする

## 会員情報閲覧（8/6追加）
- 会員の基本情報閲覧
- 会員の登録したマッチング情報一覧

## マッチング情報登録（売り手 / 買い手）

- 定型情報
  - テーブルはキー名＋Valueのデータを縦持ちするイメージ
- フリーフォーマット（全文検索対象）
- 添付資料（全文検索対象）

## マッチング情報検索
- 全文検索
- 項目別全文検索
- 項目別範囲検索（年収範囲、報酬範囲）
- 位置情報
- 日時項目検索（いつからの仕事なのか、いつまでの仕事なのか。女の子は何歳なのか）

## マッチング情報詳細閲覧（8/6追加）
- マッチング情報全てを確認する機能
- ログインの有無などにより参照できる範囲が異なる

## 管理画面（Sin時は最低限でもよい）
- 定型情報マスタ メンテ　（優先）
- 管理者マスタ　メンテ
  - 管理者追加
  - 削除
  - 更新
  - pw変更	

## SEO対応(将来的に。Sin時は最低限)
- Description（必須）


タスク(成果物)
====
## 要件定義(要件定義書)

## スケジューリング(スケジュール)
- ※割り込みタスクも考慮する事

### 大屋タスク
### 河村タスク
### 菊池タスク

## 環境構築(開発環境 + ローカル開発環境構築手順 + 開発環境構築手順)
- ソース管理
- issue管理
- ドキュメント管理
 - GoogleDrive共有プロジェクトフォルダの作成
- デプロイ先環境
- CI環境

## アーキテクチャ選定(システム構成図)
### 現状の候補

- 開発環境
  - Visual Studio Code(フロントエンド,サーバサイド) + Gitlens
  - IntelliJ IDEAもしくはAndroid Studio(サーバサイド,アプリ)
- ソース/ドキュメント/チケット管理
  - git
  - Gitea(Githubクローン)
- CI
  - Drone.io
  - Circle CI
- ビルドツール
  - Gradle(バックエンド)
  - webpack(フロントエンド)
- ドキュメンテーション
  - テキストベースによる差分管理
    - Markdown
    - PlantUML 
    - mermaid.js (シーケンス図、フローチャート記述)
    - Katex (数式記述)
    - Wiki(Giteaで提供)
  - ドキュメンテーションコメント
    - Javadoc
  - 
- 環境構築・リリース
  - Docker
  - register(Dockerのプライベートリポジトリ)
  - k8s
  - Anthos
  - ブルーグリーンデプロイメント
- サーバサイド
  - Kotlin
  - SpringBoot
  - SpringBatch(定期タスク実行)
  - JPA
  - MySQL
  - Caffeine(キャッシュライブラリ)
  - Elasticsearch
- フロントエンド
  - nuxt.js
  - vue.js
  - bulma.css(HTML+CSS3 Flexbox)
  - Critical.css
- 自動テスト
  - Spock
  - JaCoCo(カバレッジ判定)
  - lighthouse / PageSpeedInsight (SEO、アクセシビリティ、高速性判定)

## 画面設計　（画面設計書）
## DB設計　（テーブル設計書）
### 項目マスタ
- 項目ID
- 項目名称
- 入力規則
- 項目データ型（文字列、日時、経度緯度、添付ファイル）
- 入力最大サイズ
- 項目順序（TabIndexに利用)
- 必須・非必須
- ログイン必須項目
- 要認証項目（男女マッチングの場合、顔写真の参照など身元が確認できてからを想定）

### マッチング情報テーブル
- マッチング情報ID
- 利用者ID
- 登録日
- 期限

### マッチング情報明細テーブル
- マッチング情報ID
- 項目ID
- 値　（経度緯度などは、JSONなどの１カラムに入るフォーマットを使用する）

### マッチング情報利用者リンクテーブル
- マッチング情報ID
- 利用者

### 利用者テーブル
- 利用者ID
- 名前（会社名も可）
- OAuthタイプ
- 紹介文テキスト
- 管理者フラグ
- 身元確認ステータス（将来的な展望）

### 管理者PWテーブル
- 利用者ID
- PW
- 権限

## Elasticsearch連携設計（Elasticsearch連携設計書）

### 項目マスタ　→ スキーマ変換機能
### リアルタイムインデクシング
### 完全リフレッシュ機能
### 部分リフレッシュ機能

### 全文検索機能設計
- 項目指定検索
- 全文検索
- サジェスト（将来機能）

## コーディング
- Dockerfile含む

## 単体テスト
- カバレッジ100%

## 初期マスタ登録

## 結合テスト


## リリース前準備
### ドメイン取得
### SSL取得
### サーバ契約
### 本番環境構築

- 下記はK8SやAnthos検討
 - ロードバランサ設定
  
## リリース＆アップデート

